<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yxb.cms.dao.DbEmployeeMapper" >
  <resultMap id="BaseResultMap" type="com.yxb.cms.domain.vo.DbEmployee" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 14:58:23 CST 2020.
    -->
    <id column="employee_id" property="employeeId" jdbcType="VARCHAR" />
    <result column="employee_name" property="employeeName" jdbcType="VARCHAR" />
    <result column="employee_position" property="employeePosition" jdbcType="INTEGER" />
    <result column="employee_tel" property="employeeTel" jdbcType="VARCHAR" />
    <result column="employee_sex" property="employeeSex" jdbcType="INTEGER" />
    <result column="employee_age" property="employeeAge" jdbcType="INTEGER" />
    <result column="employee_birthday" property="employeeBirthday" jdbcType="VARCHAR" />
    <result column="employee_qq" property="employeeQq" jdbcType="VARCHAR" />
    <result column="employee_weixin" property="employeeWeixin" jdbcType="VARCHAR" />
    <result column="company_id" property="companyId" jdbcType="VARCHAR" />
    <result column="company_name" property="companyName" jdbcType="VARCHAR" />
    <result column="department_id" property="departmentId" jdbcType="VARCHAR" />
    <result column="department_name" property="departmentName" jdbcType="VARCHAR" />
    <result column="employee_address" property="employeeAddress" jdbcType="VARCHAR" />
    <result column="employee_status" property="employeeStatus" jdbcType="INTEGER" />
    <result column="creater_user_id" property="createrUserId" jdbcType="VARCHAR" />
    <result column="creater_time" property="createrTime" jdbcType="TIMESTAMP" />
    <result column="modifier_user_id" property="modifierUserId" jdbcType="VARCHAR" />
    <result column="modifier_time" property="modifierTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 14:58:23 CST 2020.
    -->
    employee_id, employee_name, employee_position, employee_tel, employee_sex, employee_age, 
    employee_birthday, employee_qq, employee_weixin, company_id, company_name, department_id, 
    department_name, employee_address, employee_status, creater_user_id, creater_time, 
    modifier_user_id, modifier_time
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 14:58:23 CST 2020.
    -->
    select 
    <include refid="Base_Column_List" />
    from db_employee
    where employee_id = #{employeeId,jdbcType=VARCHAR}
  </select>

  <select id="selectByPrimaryKeyByStatus" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select
    <include refid="Base_Column_List" />
    from db_employee
    where  employee_status <![CDATA[<>]]> '0' and  employee_id = #{employeeId,jdbcType=VARCHAR}
  </select>




  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 14:58:23 CST 2020.
    -->
    delete from db_employee
    where employee_id = #{employeeId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.yxb.cms.domain.vo.DbEmployee" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 14:58:23 CST 2020.
    -->
    insert into db_employee (employee_id, employee_name, employee_position, 
      employee_tel, employee_sex, employee_age, 
      employee_birthday, employee_qq, employee_weixin, 
      company_id, company_name, department_id, 
      department_name, employee_address, employee_status, 
      creater_user_id, creater_time, modifier_user_id, 
      modifier_time)
    values (#{employeeId,jdbcType=VARCHAR}, #{employeeName,jdbcType=VARCHAR}, #{employeePosition,jdbcType=INTEGER}, 
      #{employeeTel,jdbcType=VARCHAR}, #{employeeSex,jdbcType=INTEGER}, #{employeeAge,jdbcType=INTEGER}, 
      #{employeeBirthday,jdbcType=VARCHAR}, #{employeeQq,jdbcType=VARCHAR}, #{employeeWeixin,jdbcType=VARCHAR}, 
      #{companyId,jdbcType=VARCHAR}, #{companyName,jdbcType=VARCHAR}, #{departmentId,jdbcType=VARCHAR}, 
      #{departmentName,jdbcType=VARCHAR}, #{employeeAddress,jdbcType=VARCHAR}, #{employeeStatus,jdbcType=INTEGER}, 
      #{createrUserId,jdbcType=VARCHAR}, #{createrTime,jdbcType=TIMESTAMP}, #{modifierUserId,jdbcType=VARCHAR}, 
      #{modifierTime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.yxb.cms.domain.vo.DbEmployee" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 14:58:23 CST 2020.
    -->
    insert into db_employee
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="employeeId != null" >
        employee_id,
      </if>
      <if test="employeeName != null" >
        employee_name,
      </if>
      <if test="employeePosition != null" >
        employee_position,
      </if>
      <if test="employeeTel != null" >
        employee_tel,
      </if>
      <if test="employeeSex != null" >
        employee_sex,
      </if>
      <if test="employeeAge != null" >
        employee_age,
      </if>
      <if test="employeeBirthday != null" >
        employee_birthday,
      </if>
      <if test="employeeQq != null" >
        employee_qq,
      </if>
      <if test="employeeWeixin != null" >
        employee_weixin,
      </if>
      <if test="companyId != null" >
        company_id,
      </if>
      <if test="companyName != null" >
        company_name,
      </if>
      <if test="departmentId != null" >
        department_id,
      </if>
      <if test="departmentName != null" >
        department_name,
      </if>
      <if test="employeeAddress != null" >
        employee_address,
      </if>
      <if test="employeeStatus != null" >
        employee_status,
      </if>
      <if test="createrUserId != null" >
        creater_user_id,
      </if>
      <if test="createrTime != null" >
        creater_time,
      </if>
      <if test="modifierUserId != null" >
        modifier_user_id,
      </if>
      <if test="modifierTime != null" >
        modifier_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="employeeId != null" >
        #{employeeId,jdbcType=VARCHAR},
      </if>
      <if test="employeeName != null" >
        #{employeeName,jdbcType=VARCHAR},
      </if>
      <if test="employeePosition != null" >
        #{employeePosition,jdbcType=INTEGER},
      </if>
      <if test="employeeTel != null" >
        #{employeeTel,jdbcType=VARCHAR},
      </if>
      <if test="employeeSex != null" >
        #{employeeSex,jdbcType=INTEGER},
      </if>
      <if test="employeeAge != null" >
        #{employeeAge,jdbcType=INTEGER},
      </if>
      <if test="employeeBirthday != null" >
        #{employeeBirthday,jdbcType=VARCHAR},
      </if>
      <if test="employeeQq != null" >
        #{employeeQq,jdbcType=VARCHAR},
      </if>
      <if test="employeeWeixin != null" >
        #{employeeWeixin,jdbcType=VARCHAR},
      </if>
      <if test="companyId != null" >
        #{companyId,jdbcType=VARCHAR},
      </if>
      <if test="companyName != null" >
        #{companyName,jdbcType=VARCHAR},
      </if>
      <if test="departmentId != null" >
        #{departmentId,jdbcType=VARCHAR},
      </if>
      <if test="departmentName != null" >
        #{departmentName,jdbcType=VARCHAR},
      </if>
      <if test="employeeAddress != null" >
        #{employeeAddress,jdbcType=VARCHAR},
      </if>
      <if test="employeeStatus != null" >
        #{employeeStatus,jdbcType=INTEGER},
      </if>
      <if test="createrUserId != null" >
        #{createrUserId,jdbcType=VARCHAR},
      </if>
      <if test="createrTime != null" >
        #{createrTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifierUserId != null" >
        #{modifierUserId,jdbcType=VARCHAR},
      </if>
      <if test="modifierTime != null" >
        #{modifierTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.yxb.cms.domain.vo.DbEmployee" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 14:58:23 CST 2020.
    -->
    update db_employee
    <set >
      <if test="employeeName != null" >
        employee_name = #{employeeName,jdbcType=VARCHAR},
      </if>
      <if test="employeePosition != null" >
        employee_position = #{employeePosition,jdbcType=INTEGER},
      </if>
      <if test="employeeTel != null" >
        employee_tel = #{employeeTel,jdbcType=VARCHAR},
      </if>
      <if test="employeeSex != null" >
        employee_sex = #{employeeSex,jdbcType=INTEGER},
      </if>
      <if test="employeeAge != null" >
        employee_age = #{employeeAge,jdbcType=INTEGER},
      </if>
      <if test="employeeBirthday != null" >
        employee_birthday = #{employeeBirthday,jdbcType=VARCHAR},
      </if>
      <if test="employeeQq != null" >
        employee_qq = #{employeeQq,jdbcType=VARCHAR},
      </if>
      <if test="employeeWeixin != null" >
        employee_weixin = #{employeeWeixin,jdbcType=VARCHAR},
      </if>
      <if test="companyId != null" >
        company_id = #{companyId,jdbcType=VARCHAR},
      </if>
      <if test="companyName != null" >
        company_name = #{companyName,jdbcType=VARCHAR},
      </if>
      <if test="departmentId != null" >
        department_id = #{departmentId,jdbcType=VARCHAR},
      </if>
      <if test="departmentName != null" >
        department_name = #{departmentName,jdbcType=VARCHAR},
      </if>
      <if test="employeeAddress != null" >
        employee_address = #{employeeAddress,jdbcType=VARCHAR},
      </if>
      <if test="employeeStatus != null" >
        employee_status = #{employeeStatus,jdbcType=INTEGER},
      </if>
      <if test="createrUserId != null" >
        creater_user_id = #{createrUserId,jdbcType=VARCHAR},
      </if>
      <if test="createrTime != null" >
        creater_time = #{createrTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifierUserId != null" >
        modifier_user_id = #{modifierUserId,jdbcType=VARCHAR},
      </if>
      <if test="modifierTime != null" >
        modifier_time = #{modifierTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where employee_id = #{employeeId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.yxb.cms.domain.vo.DbEmployee" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 14:58:23 CST 2020.
    -->
    update db_employee
    set employee_name = #{employeeName,jdbcType=VARCHAR},
      employee_position = #{employeePosition,jdbcType=INTEGER},
      employee_tel = #{employeeTel,jdbcType=VARCHAR},
      employee_sex = #{employeeSex,jdbcType=INTEGER},
      employee_age = #{employeeAge,jdbcType=INTEGER},
      employee_birthday = #{employeeBirthday,jdbcType=VARCHAR},
      employee_qq = #{employeeQq,jdbcType=VARCHAR},
      employee_weixin = #{employeeWeixin,jdbcType=VARCHAR},
      company_id = #{companyId,jdbcType=VARCHAR},
      company_name = #{companyName,jdbcType=VARCHAR},
      department_id = #{departmentId,jdbcType=VARCHAR},
      department_name = #{departmentName,jdbcType=VARCHAR},
      employee_address = #{employeeAddress,jdbcType=VARCHAR},
      employee_status = #{employeeStatus,jdbcType=INTEGER},
      creater_user_id = #{createrUserId,jdbcType=VARCHAR},
      creater_time = #{createrTime,jdbcType=TIMESTAMP},
      modifier_user_id = #{modifierUserId,jdbcType=VARCHAR},
      modifier_time = #{modifierTime,jdbcType=TIMESTAMP}
    where employee_id = #{employeeId,jdbcType=VARCHAR}
  </update>



  <!-- 查询员工总记录数 -->
  <select id="selectEmployeeCount" parameterType="com.yxb.cms.domain.vo.DbEmployee" resultType="java.lang.Long">
    select count(*)
    from db_employee u
    <include refid="selectPageParmas" />
  </select>

  <!-- 员工信息分页展示 -->
  <select id="selectEmployeeListByPage" parameterType="com.yxb.cms.domain.vo.DbEmployee" resultType="com.yxb.cms.domain.vo.DbEmployee">
    SELECT
    u.employee_id as employeeId,
    u.employee_name as employeeName,
    u.employee_position as employeePosition,
    u.employee_tel as employeeTel,
    u.employee_sex as employeeSex,
    u.employee_age as employeeAge,

    u.company_id as companyId,
    u.company_name as companyName,

    u.department_id as departmentId,
    u.department_name as departmentName,


    u.employee_status as employeeStatus

    from db_employee u
    <include refid="selectPageParmas" />
    LIMIT #{start},#{limit}

  </select>

  <!-- 分页查询条件 -->
  <sql id="selectPageParmas">
    <where>
      u.employee_status <![CDATA[<>]]> '0'
      <if test="employeeName != null and employeeName != '' ">
        and (u.employee_name LIKE CONCAT(#{employeeName,jdbcType=VARCHAR}, '%')
        OR u.employee_tel LIKE CONCAT(#{employeeName,jdbcType=VARCHAR}, '%')
        )
      </if>

    </where>
  </sql>

  <!--根据项目Id查询员工信息 -->
  <select id="selectEmployeeListByProjectId" resultType="com.yxb.cms.domain.vo.DbEmployee">
   SELECT
      u.employee_id as employeeId,
      u.employee_name as employeeName

   from db_employee u
   where  u.employee_status <![CDATA[<>]]> '0'
   and  u.employee_id  not in(select d.employee_id from db_member_manager d
   where d.member_status = 1
    <if test="memberId != null and memberId != '' ">
      and d.member_id !=  #{memberId,jdbcType=VARCHAR}
    </if>

   )

  </select>
</mapper>